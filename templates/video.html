{% extends 'base.html' %}

{% block extra_head %}
  <script>
    var VIDEO_ID = {{ video.id }};
  </script>
  <script src="/static/js/video.js"></script>
{% endblock %}
{% block main %}
<div>
  <a href="{{ video.get_day_link }}">
    Back to day
  </a>
</div>
<h3>{{ video.get_title }}</h3>
<video src='/media/{{ video.video.name }}' class="video" id="video" controls="controls"></video>
<div class="video-controls container-sm">
  <button class="btn" id="slowdown">Slowdown (s)</button>
  <button class="btn" id="goBack">Prev Frame (←)</button>
  <button class="btn" id="pauseVideo">Play! (space)</button>
  <button class="btn" id="resetSpeed">Reset Speed (r)</button>
  <button class="btn" id="goForward">Next Frame (→)</button>
  <button class="btn" id="speedUp">Speed Up (f)</button>
</div>
<form class="container-sm hide js-show-on-pause">
  {% csrf_token %}
  <div class="form-field-block">
    <label for="report-description">
      Description of your report:
    </label>
    <textarea id="report-description"></textarea>
  </div>
  <div class="form-field-block js-submit-div">
      <button id="submit" class="btn">Submit Report</button>
    </div>
</form>
{% if existing_reports %}
  <div class="container-sm">
    <h5>Existing Reports:</h5>
    <ul>
      {% for report in existing_reports %}
      <li>
        <a href="/report/video/{{ report.id }}">See Report</a>
        <a href="#" class="js-jumpToTimecode" data-timecode="{{ report.timecode }}">(Goto Frame)</a>
      </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
<div class="container-sm">
  {% if previous_video %}
  <a href="/video/{{ previous_video.id }}">Previous Video</a>
  {% endif %}
  {% if next_video %}
  <a href="/video/{{ next_video.id }}">Next Video</a>
  {% endif %}
</div>
{% endblock %}